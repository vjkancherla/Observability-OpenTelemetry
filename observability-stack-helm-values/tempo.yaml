tempo:
  repository: grafana/tempo
  tag: 2.7.1
  
   Minimal resources for low-memory environments
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 100m
      memory: 256Mi
  
  storage:
    trace:
      backend: local
      local:
        path: /var/tempo/traces
      wal:
        path: /var/tempo/wal
      # Reduce block size and cache
      block:
        encoding: zstd
      pool:
        max_workers: 10
        queue_depth: 2000
  
  receivers:
    otlp:
      protocols:
        grpc:
          endpoint: 0.0.0.0:4317
        http:
          endpoint: 0.0.0.0:4318
  
  # Reduce memory usage
  querier:
    max_concurrent_queries: 5
  
  # Minimal ingester settings
  ingester:
    max_block_duration: 5m
    max_block_bytes: 10485760  # 10MB

persistence:
  enabled: true
  size: 200Mi  # Reduced from 1Gi
  accessModes:
    - ReadWriteOnce

service:
  type: ClusterIP